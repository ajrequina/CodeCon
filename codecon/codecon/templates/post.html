{% extends 'base.html' %}

{% block page_title %}
	Add Post
{% endblock %}

{% block css %}
	{% load static %}
{% endblock %}



{% block content %}
	<a href="{% url 'accounts:logout' %}">Logout</a>
	<a href="{% url 'posts:homepage'%}">Home</a>
	<a href="{% url 'posts:view_posts'%}">All Posts</a>
	<a href="{% url 'posts:add_post_page' %}">Add Post</a>
	<hr>
		<div>
			<h1>{{ post.title }}</h1> 
			{{ post.date_created }} <br>
			{{ post.category }} : {{ post.language }} <br>
			<h3>{{ post.content }}</h3> <br>
			{% if post.is_owner %}
				<a href="{% url 'posts:update_post_page' pk=post.pk %}">Update</a>
				<a href="{% url 'posts:delete_post' pk=post.pk %}">Delete</a>
			{% endif %}
			
			<a href="{% url 'posts:like_post' pk=post.pk %}">Like</a>
			{{ post.all_likes.count }}

			{% for like in post.all_likes %}
				<hr>
				{{ like.liker }} <br>
				last {{ like.like_date }}  <br>
				<hr>
			{% endfor %}
			<form method="POST" action="{% url 'posts:add_comment_detail' pk=post.pk %}">
				{% csrf_token %}
				<textarea name="comment_content"></textarea>
				<button type="submit">SUBMIT</button>
			</form>

			{% for comment in post.all_comments %}
				<hr>
				<form style="display:none;" method="POST" action="{% url 'posts:add_comment_detail' pk=post.pk %}">
					{% csrf_token %}
					<textarea name="comment_content">{{ comment.content }}</textarea>
					<button type="submit">SUBMIT</button>
				</form>
				<div id="" >
					{{ comment.content }} <br>
					last {{ comment.date_created }}  <br>
					by {{ comment.owner }}<br>
					{% if comment.is_owner %}
						<a id="editComment" href="#">Edit</a>
						<a href="{% url 'posts:delete_comment' pk=comment.pk %}">Delete</a>
					{% endif %}
				</div>
				<hr>
			{% endfor %}

			
		</div>
	<hr>
{% endblock %}

{% block javascripts %}
	{% load static %}
	<script src="{% static 'js/post.js' %}"></script>
{% endblock %}


